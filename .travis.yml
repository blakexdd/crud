language: clojure

services:
  - postgresql

before_script:
  - psql -c 'create database users;' -U postgres
  - psql -c "CREATE USER admin WITH PASSWORD '1234';" -U postgres
  - 1234 | psql -c "create table patients(
      id SERIAL PRIMARY KEY,
      firstname text NOT NULL UNIQUE,
      gender char(1) NOT NULL,
      bday date NOT NULL,
      adress text NOT NULL,
      oms bigint NOT NULL
      );" -U admin -W

script: lein test